---
work_package_id: "WP08"
title: "Testing & Integration"
lane: "planned"
dependencies: ["WP07"]
---

# WP08: Testing & Integration

## Objective
Validate end-to-end functionality and add observability.

## Tasks

1. **Create test Figma file**
   - Various node types (frames, text, rectangles)
   - Comments with triggers at different positions
   - Edge cases (nested groups, components)

2. **End-to-end test scenarios**
   - Comment with `Claude:` prefix triggers task
   - Immediate "Queued ⏳" reply appears
   - Target resolution returns correct node
   - Manipulation commands execute successfully
   - Completion reply summarizes actions
   - Safety gating requires `Claude: go` for destructive ops

3. **Add observability**
   - Structured logs by task_id/comment_id
   - `/api/stats` includes:
     - Queue counts by status
     - Average durations
     - Error rates
   - Health check includes comment system status

4. **Performance testing**
   - Measure latency: comment → response
   - Test with multiple concurrent comments
   - Identify bottlenecks

## Deliverables

- [ ] Test file documented and shared
- [ ] `figma-mcp-server/tests/comments/` test suite
- [ ] `figma-plugin-bridge/tests/comments/` test suite
- [ ] Updated `/api/stats` endpoint
- [ ] Performance benchmarks

## Acceptance Criteria

- All test scenarios pass
- Observability data accurate and useful
- Latency acceptable (<10s for simple ops)
- No crashes under concurrent load
